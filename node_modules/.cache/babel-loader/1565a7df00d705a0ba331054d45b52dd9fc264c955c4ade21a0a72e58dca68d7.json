{"ast":null,"code":"var _jsxFileName = \"/Users/valu/Desktop/TESTSDS/my-app/src/agents/Passenger.js\",\n  _s = $RefreshSig$();\nimport styles from \"./styles.module.css\";\nimport React, { useState, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Passenger(_ref) {\n  _s();\n  let {\n    location,\n    destination,\n    driver\n  } = _ref;\n  const [state, setState] = useState(\"waiting\");\n  const [currentLocation, setCurrentLocation] = useState(location);\n  const [waitingTime, setWaitingTime] = useState(0);\n  useEffect(() => {\n    const appearTime = Date.now() / 1000 | 0;\n    console.log(`Passenger appear at ${appearTime}`);\n    function carArrived(timestamp) {\n      if (driver.currentLocation === location) {\n        const waitingTime = timestamp - appearTime;\n        console.log(`Passenger waiting time: ${waitingTime}`);\n        setWaitingTime(waitingTime);\n        setState(\"transit\");\n      }\n    }\n    function transit() {\n      setCurrentLocation(driver.currentLocation);\n      console.log(`passenger current location when transit: ${currentLocation}`);\n      if (currentLocation === destination) {\n        setState(\"arrived\");\n      }\n    }\n    let intervalId = null;\n    if (state === \"waiting\") {\n      intervalId = setInterval(() => {\n        carArrived(Date.now() / 1000 | 0);\n      }, 1000);\n    } else if (state === \"transit\") {\n      intervalId = setInterval(() => {\n        transit();\n      }, 1000);\n    }\n    return () => clearInterval(intervalId);\n  }, [state, location, destination, driver]);\n  useEffect(() => {\n    if (state === \"arrived\") {\n      console.log(`Total waiting time: ${waitingTime}`);\n      // remove passenger from the screen\n    }\n  }, [state, waitingTime]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Passenger state: \", state]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Passenger current location: \", currentLocation]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n}\n_s(Passenger, \"kfcsRrqSn+TtaXgSSkastn0THng=\");\n_c = Passenger;\nexport default Passenger;\nvar _c;\n$RefreshReg$(_c, \"Passenger\");","map":{"version":3,"names":["styles","React","useState","useEffect","jsxDEV","_jsxDEV","Passenger","_ref","_s","location","destination","driver","state","setState","currentLocation","setCurrentLocation","waitingTime","setWaitingTime","appearTime","Date","now","console","log","carArrived","timestamp","transit","intervalId","setInterval","clearInterval","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/valu/Desktop/TESTSDS/my-app/src/agents/Passenger.js"],"sourcesContent":["import styles from \"./styles.module.css\";\nimport React, { useState, useEffect } from \"react\";\n\nfunction Passenger({ location, destination, driver }) {\n  const [state, setState] = useState(\"waiting\");\n  const [currentLocation, setCurrentLocation] = useState(location);\n  const [waitingTime, setWaitingTime] = useState(0);\n\n  useEffect(() => {\n    const appearTime = (Date.now() / 1000) | 0;\n    console.log(`Passenger appear at ${appearTime}`);\n\n    function carArrived(timestamp) {\n      if (driver.currentLocation === location) {\n        const waitingTime = timestamp - appearTime;\n        console.log(`Passenger waiting time: ${waitingTime}`);\n        setWaitingTime(waitingTime);\n        setState(\"transit\");\n      }\n    }\n\n    function transit() {\n      setCurrentLocation(driver.currentLocation);\n      console.log(\n        `passenger current location when transit: ${currentLocation}`\n      );\n      if (currentLocation === destination) {\n        setState(\"arrived\");\n      }\n    }\n\n    let intervalId = null;\n    if (state === \"waiting\") {\n      intervalId = setInterval(() => {\n        carArrived((Date.now() / 1000) | 0);\n      }, 1000);\n    } else if (state === \"transit\") {\n      intervalId = setInterval(() => {\n        transit();\n      }, 1000);\n    }\n\n    return () => clearInterval(intervalId);\n  }, [state, location, destination, driver]);\n\n  useEffect(() => {\n    if (state === \"arrived\") {\n      console.log(`Total waiting time: ${waitingTime}`);\n      // remove passenger from the screen\n    }\n  }, [state, waitingTime]);\n\n  return (\n    <div>\n      <div>Passenger state: {state}</div>\n      <div>Passenger current location: {currentLocation}</div>\n    </div>\n  );\n}\n\nexport default Passenger;\n"],"mappings":";;AAAA,OAAOA,MAAM,MAAM,qBAAqB;AACxC,OAAOC,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEnD,SAASC,SAASA,CAAAC,IAAA,EAAoC;EAAAC,EAAA;EAAA,IAAnC;IAAEC,QAAQ;IAAEC,WAAW;IAAEC;EAAO,CAAC,GAAAJ,IAAA;EAClD,MAAM,CAACK,KAAK,EAAEC,QAAQ,CAAC,GAAGX,QAAQ,CAAC,SAAS,CAAC;EAC7C,MAAM,CAACY,eAAe,EAAEC,kBAAkB,CAAC,GAAGb,QAAQ,CAACO,QAAQ,CAAC;EAChE,MAAM,CAACO,WAAW,EAAEC,cAAc,CAAC,GAAGf,QAAQ,CAAC,CAAC,CAAC;EAEjDC,SAAS,CAAC,MAAM;IACd,MAAMe,UAAU,GAAIC,IAAI,CAACC,GAAG,EAAE,GAAG,IAAI,GAAI,CAAC;IAC1CC,OAAO,CAACC,GAAG,CAAE,uBAAsBJ,UAAW,EAAC,CAAC;IAEhD,SAASK,UAAUA,CAACC,SAAS,EAAE;MAC7B,IAAIb,MAAM,CAACG,eAAe,KAAKL,QAAQ,EAAE;QACvC,MAAMO,WAAW,GAAGQ,SAAS,GAAGN,UAAU;QAC1CG,OAAO,CAACC,GAAG,CAAE,2BAA0BN,WAAY,EAAC,CAAC;QACrDC,cAAc,CAACD,WAAW,CAAC;QAC3BH,QAAQ,CAAC,SAAS,CAAC;MACrB;IACF;IAEA,SAASY,OAAOA,CAAA,EAAG;MACjBV,kBAAkB,CAACJ,MAAM,CAACG,eAAe,CAAC;MAC1CO,OAAO,CAACC,GAAG,CACR,4CAA2CR,eAAgB,EAAC,CAC9D;MACD,IAAIA,eAAe,KAAKJ,WAAW,EAAE;QACnCG,QAAQ,CAAC,SAAS,CAAC;MACrB;IACF;IAEA,IAAIa,UAAU,GAAG,IAAI;IACrB,IAAId,KAAK,KAAK,SAAS,EAAE;MACvBc,UAAU,GAAGC,WAAW,CAAC,MAAM;QAC7BJ,UAAU,CAAEJ,IAAI,CAACC,GAAG,EAAE,GAAG,IAAI,GAAI,CAAC,CAAC;MACrC,CAAC,EAAE,IAAI,CAAC;IACV,CAAC,MAAM,IAAIR,KAAK,KAAK,SAAS,EAAE;MAC9Bc,UAAU,GAAGC,WAAW,CAAC,MAAM;QAC7BF,OAAO,EAAE;MACX,CAAC,EAAE,IAAI,CAAC;IACV;IAEA,OAAO,MAAMG,aAAa,CAACF,UAAU,CAAC;EACxC,CAAC,EAAE,CAACd,KAAK,EAAEH,QAAQ,EAAEC,WAAW,EAAEC,MAAM,CAAC,CAAC;EAE1CR,SAAS,CAAC,MAAM;IACd,IAAIS,KAAK,KAAK,SAAS,EAAE;MACvBS,OAAO,CAACC,GAAG,CAAE,uBAAsBN,WAAY,EAAC,CAAC;MACjD;IACF;EACF,CAAC,EAAE,CAACJ,KAAK,EAAEI,WAAW,CAAC,CAAC;EAExB,oBACEX,OAAA;IAAAwB,QAAA,gBACExB,OAAA;MAAAwB,QAAA,GAAK,mBAAiB,EAACjB,KAAK;IAAA;MAAAkB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAAO,eACnC5B,OAAA;MAAAwB,QAAA,GAAK,8BAA4B,EAACf,eAAe;IAAA;MAAAgB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAAO;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,QACpD;AAEV;AAACzB,EAAA,CAvDQF,SAAS;AAAA4B,EAAA,GAAT5B,SAAS;AAyDlB,eAAeA,SAAS;AAAC,IAAA4B,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}