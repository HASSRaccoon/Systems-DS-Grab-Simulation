{"ast":null,"code":"var _jsxFileName = \"/Users/valu/Desktop/TESTSDS/my-app/src/agents/Driver.js\",\n  _s = $RefreshSig$();\nimport styles from \"./styles.module.css\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { moveTo } from \"../utils/moveTo\";\n\n// const Driver = () => {\n\n// const search = () => {\n//   let timer;\n//   if (!passenger) {\n//     timer = setInterval(() => {\n//       const newDestination = {\n//         x: Math.floor(Math.random() * 500),\n//         y: Math.floor(Math.random() * 500),\n//       };\n//       setDestination(newDestination);\n//       if (location.x === newDestination.x && location.y === newDestination.y) {\n//         clearInterval(timer);\n//         search();\n//       }\n//     }, 5000);\n//   } else {\n//     const foundPassenger = passenger.find((p) => p.happyFactor < happyFactor);\n//     if (foundPassenger) {\n//       setDestination(foundPassenger.destination);\n//     } else {\n//       timer = setInterval(() => {\n//         const newDestination = {\n//           x: Math.floor(Math.random() * 500),\n//           y: Math.floor(Math.random() * 500),\n//         };\n//         setDestination(newDestination);\n//         if (\n//           location.x === newDestination.x &&\n//           location.y === newDestination.y\n//         ) {\n//           clearInterval(timer);\n//           search();\n//         }\n//       }, 5000);\n//     }\n//   }\n\n//   setTimeout(() => {\n//     clearInterval(timer);\n//     // check if there's still no passenger or no passenger that meets the happyFactor criteria after 10 seconds\n//     if (!passenger || !passenger.find((p) => p.happyFactor < happyFactor)) {\n//       // driver disappears\n//     }\n//   }, 10000);\n// };\n\n//   const pickup = (passenger) => {\n//     setPassenger(passenger);\n//   };\n\n//   // const deliver = () => {\n//   //   setLocation(passenger.destination);\n//   //   // passenger and driver now become a unit\n//   //   // move together on the screen to the passenger's destination\n//   //   // driver disappears after reaching the destination\n//   //   // passenger disappears\n//   //   // driver goes back to function searching\n//   // };\n\n//   const completed = () => {\n//     search();\n//   };\n\n// function Driver() {\n//   const [location, setLocation] = useState({\n//     x: Math.floor(Math.random() * 500),\n//     y: Math.floor(Math.random() * 500),\n//   });\n//   const [destination, setDestination] = useState({\n//     x: Math.floor(Math.random() * 500),\n//     y: Math.floor(Math.random() * 500),\n//   });\n\n//   const [state, setState] = useState(\"SEARCHING\");\n//   const circleRef = useRef(null);\n\n//   function search() {}\n//   useEffect(() => {\n//     const circle = circleRef.current;\n//     function updatePosition() {\n//       const dx = destination.x - location.x;\n//       const dy = destination.y - location.y;\n//       const distance = Math.sqrt(dx * dx + dy * dy);\n//       const speed = 5;\n//       const directionX = dx / distance;\n//       const directionY = dy / distance;\n//       const newPositionX = location.x + directionX * speed;\n//       const newPositionY = location.y + directionY * speed;\n//       circle.setAttribute(\"cx\", newPositionX);\n//       circle.setAttribute(\"cy\", newPositionY);\n//       if (newPositionX === destination.x && newPositionY === destination.y) {\n//         clearInterval(intervalId);\n//       }\n//     }\n\n//     const intervalId = setInterval(updatePosition, 10); // Set up a timer to update the circle's position\n\n//     return () => {\n//       clearInterval(intervalId); // Clean up the timer when the component unmounts\n//     };\n//   }, [location, destination]);\n\n//   // useEffect(() => {\n//   //   search();\n//   // }, []);\n//   return (\n//     <div\n//       className={styles.driver}\n//       style={{ top: location.y, left: location.x }}\n//     >\n//       {/* green circle */}\n//     </div>\n//   );\n// }\n\n// export default Driver;\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Driver() {\n  _s();\n  const [position, setPosition] = useState({\n    x: 0,\n    y: 0\n  });\n  const [destination, setDestination] = useState({\n    x: 0,\n    y: 0\n  });\n  const [passenger, setPassenger] = useState(null);\n  const [happyFactor, setHappyFactor] = useState(0);\n  const [speed, setSpeed] = useState(1);\n  const ballRef = useRef(null);\n  useEffect(() => {\n    setRandomDestination();\n  }, []);\n\n  // useEffect(() => {\n  //   moveTo(destination);\n  // }, [destination]);\n  useEffect(() => {\n    moveTo(ballRef.current, position, destination, ballRef);\n  }, [destination]);\n  function setRandomDestination() {\n    const x = Math.floor(Math.random() * 200);\n    const y = Math.floor(Math.random() * 200);\n    setDestination({\n      x,\n      y\n    });\n  }\n\n  // function moveTo(destination) {\n  //   const ball = ballRef.current;\n  // const distance = Math.sqrt(\n  //   (destination.x - position.x) ** 2 + (destination.y - position.y) ** 2\n  // );\n  // const duration = distance / 50; // adjust the speed of the animation\n  // ball.style.transition = `transform ${duration}s ease-out`;\n  // const xTranslation = Math.min(\n  //   destination.x - position.x,\n  //   200 - position.x - ballRef.current.offsetWidth\n  // );\n  // const yTranslation = Math.min(\n  //   destination.y - position.y,\n  //   200 - position.y - ballRef.current.offsetHeight\n  // );\n  // ball.style.transform = `translate(${xTranslation}px, ${yTranslation}px)`;\n  // setTimeout(() => {\n  //   setPosition({\n  //     x: position.x + xTranslation,\n  //     y: position.y + yTranslation,\n  //   });\n  // }, duration * 1000);\n  // }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.driver,\n      ref: ballRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 173,\n    columnNumber: 5\n  }, this);\n}\n_s(Driver, \"p0uMdld8bRGxptBsgT3A03vFpM4=\");\n_c = Driver;\nexport default Driver;\nvar _c;\n$RefreshReg$(_c, \"Driver\");","map":{"version":3,"names":["styles","React","useState","useEffect","useRef","moveTo","jsxDEV","_jsxDEV","Driver","_s","position","setPosition","x","y","destination","setDestination","passenger","setPassenger","happyFactor","setHappyFactor","speed","setSpeed","ballRef","setRandomDestination","current","Math","floor","random","children","className","driver","ref","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/valu/Desktop/TESTSDS/my-app/src/agents/Driver.js"],"sourcesContent":["import styles from \"./styles.module.css\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { moveTo } from \"../utils/moveTo\";\n\n// const Driver = () => {\n\n// const search = () => {\n//   let timer;\n//   if (!passenger) {\n//     timer = setInterval(() => {\n//       const newDestination = {\n//         x: Math.floor(Math.random() * 500),\n//         y: Math.floor(Math.random() * 500),\n//       };\n//       setDestination(newDestination);\n//       if (location.x === newDestination.x && location.y === newDestination.y) {\n//         clearInterval(timer);\n//         search();\n//       }\n//     }, 5000);\n//   } else {\n//     const foundPassenger = passenger.find((p) => p.happyFactor < happyFactor);\n//     if (foundPassenger) {\n//       setDestination(foundPassenger.destination);\n//     } else {\n//       timer = setInterval(() => {\n//         const newDestination = {\n//           x: Math.floor(Math.random() * 500),\n//           y: Math.floor(Math.random() * 500),\n//         };\n//         setDestination(newDestination);\n//         if (\n//           location.x === newDestination.x &&\n//           location.y === newDestination.y\n//         ) {\n//           clearInterval(timer);\n//           search();\n//         }\n//       }, 5000);\n//     }\n//   }\n\n//   setTimeout(() => {\n//     clearInterval(timer);\n//     // check if there's still no passenger or no passenger that meets the happyFactor criteria after 10 seconds\n//     if (!passenger || !passenger.find((p) => p.happyFactor < happyFactor)) {\n//       // driver disappears\n//     }\n//   }, 10000);\n// };\n\n//   const pickup = (passenger) => {\n//     setPassenger(passenger);\n//   };\n\n//   // const deliver = () => {\n//   //   setLocation(passenger.destination);\n//   //   // passenger and driver now become a unit\n//   //   // move together on the screen to the passenger's destination\n//   //   // driver disappears after reaching the destination\n//   //   // passenger disappears\n//   //   // driver goes back to function searching\n//   // };\n\n//   const completed = () => {\n//     search();\n//   };\n\n// function Driver() {\n//   const [location, setLocation] = useState({\n//     x: Math.floor(Math.random() * 500),\n//     y: Math.floor(Math.random() * 500),\n//   });\n//   const [destination, setDestination] = useState({\n//     x: Math.floor(Math.random() * 500),\n//     y: Math.floor(Math.random() * 500),\n//   });\n\n//   const [state, setState] = useState(\"SEARCHING\");\n//   const circleRef = useRef(null);\n\n//   function search() {}\n//   useEffect(() => {\n//     const circle = circleRef.current;\n//     function updatePosition() {\n//       const dx = destination.x - location.x;\n//       const dy = destination.y - location.y;\n//       const distance = Math.sqrt(dx * dx + dy * dy);\n//       const speed = 5;\n//       const directionX = dx / distance;\n//       const directionY = dy / distance;\n//       const newPositionX = location.x + directionX * speed;\n//       const newPositionY = location.y + directionY * speed;\n//       circle.setAttribute(\"cx\", newPositionX);\n//       circle.setAttribute(\"cy\", newPositionY);\n//       if (newPositionX === destination.x && newPositionY === destination.y) {\n//         clearInterval(intervalId);\n//       }\n//     }\n\n//     const intervalId = setInterval(updatePosition, 10); // Set up a timer to update the circle's position\n\n//     return () => {\n//       clearInterval(intervalId); // Clean up the timer when the component unmounts\n//     };\n//   }, [location, destination]);\n\n//   // useEffect(() => {\n//   //   search();\n//   // }, []);\n//   return (\n//     <div\n//       className={styles.driver}\n//       style={{ top: location.y, left: location.x }}\n//     >\n//       {/* green circle */}\n//     </div>\n//   );\n// }\n\n// export default Driver;\n\nfunction Driver() {\n  const [position, setPosition] = useState({ x: 0, y: 0 });\n  const [destination, setDestination] = useState({ x: 0, y: 0 });\n  const [passenger, setPassenger] = useState(null);\n  const [happyFactor, setHappyFactor] = useState(0);\n  const [speed, setSpeed] = useState(1);\n  const ballRef = useRef(null);\n\n  useEffect(() => {\n    setRandomDestination();\n  }, []);\n\n  // useEffect(() => {\n  //   moveTo(destination);\n  // }, [destination]);\n  useEffect(() => {\n    moveTo(ballRef.current, position, destination, ballRef);\n  }, [destination]);\n\n  function setRandomDestination() {\n    const x = Math.floor(Math.random() * 200);\n    const y = Math.floor(Math.random() * 200);\n    setDestination({ x, y });\n  }\n\n  // function moveTo(destination) {\n  //   const ball = ballRef.current;\n  // const distance = Math.sqrt(\n  //   (destination.x - position.x) ** 2 + (destination.y - position.y) ** 2\n  // );\n  // const duration = distance / 50; // adjust the speed of the animation\n  // ball.style.transition = `transform ${duration}s ease-out`;\n  // const xTranslation = Math.min(\n  //   destination.x - position.x,\n  //   200 - position.x - ballRef.current.offsetWidth\n  // );\n  // const yTranslation = Math.min(\n  //   destination.y - position.y,\n  //   200 - position.y - ballRef.current.offsetHeight\n  // );\n  // ball.style.transform = `translate(${xTranslation}px, ${yTranslation}px)`;\n  // setTimeout(() => {\n  //   setPosition({\n  //     x: position.x + xTranslation,\n  //     y: position.y + yTranslation,\n  //   });\n  // }, duration * 1000);\n  // }\n\n  return (\n    <div>\n      <div className={styles.driver} ref={ballRef}></div>\n    </div>\n  );\n}\n\nexport default Driver;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}